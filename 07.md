# 変数～動的なプログラム～
ボタンを押したら、ラベルが動く向きを反転させるにはどうしたらよいだろうか。

## 問題点

実行中に座標を足す値を変えられない

## 解決策

実行中に足す値を変えられるようにする・・・変数を使う

## C#での変数の使い方

1. 記録するデータの型と、変数名を書いて、変数を定義
2. 変数に値を代入
3. 変数の値を使いたい場所に変数を書く

## 変数定義の書き方

int型のaという名前の変数を定義する。

```cs
int a;
```

float型のfwという名前の変数を定義する。

```cs
float fw;
```

string型のstrという名前の変数を定義する。

```cs
string str;
```

bool型のblという名前の変数を定義する。

```cs
bool bl;
```

int型のbという名前の変数を定義し、10を代入する。

```cs
int b = 10;
```

float型のfw2という名前の変数を定義し、-10.5を代入する。

```cs
float sw2 = -10.5;
```

string型のstr2という名前の変数を定義し、「こんにちは」を代入する。

```cs
string str2
```

bool型のbl2という名前の変数を定義し、`true`を代入する。

```cs
bool bl2 = true;
```


## 演習7-1
「演習7-1」ボタンを作成して、クリック時にint型の変数vxを定義して、5を代入。メッセージボックスでvxを表示させてみよう。

動きを確認したら、その下にvxに10を代入して、メッセージボックスでvxを表示させてみよう。

## 演習7-2
「演習7-2」ボタンを作成して、クリック時にメッセージボックスでvxを表示するコードを書いてみよう。Startしようとすると何が起きるか、また、vxはどこで有効かを以下にまとめよう。

### 何が起きる？

エラーが起きた

### vxの有効範囲は？

定義した波かっこの中

## 演習7-3
クラス定義(class)の直下に、int型の変数vxを定義して、20を代入するコードを追加する。

### 演習7-2と比べてどうなった？

エラーがなくなった

### 演習7-1ボタンと、演習7-2ボタンを交互に押して、それぞれ何が表示されるか？

- 演習7-1・・・5と10
- 演習7-2・・・20
- 分かったこと
    - 演習7-1と7-2のvxは別物

## データの代入方法
定義済みのint型変数aに、100を代入する。

```cs
a = 100
```

定義済みのfloat型変数fwに、3.14を代入する。

```cs
fw = 3.14f
```

定義済みのstring型変数strに、「こんにちは」を代入する。

```cs
str = "こんにちは"
```

定義済みのbool型変数blに、falseを代入する。

```cs
bl = false
```


## 演習7-4
「演習7-4」ボタンを作成して、vxを10増やして、vxをメッセージボックスに表示するコードを作成する。できたら実行して以下に解答しよう。

次の順番にボタンを押して、表示される内容を記入しよう。
- 演習7-2：20
- 演習7-1：5to10
- 演習7-2：20
- 演習7-4：30
- 演習7-2：30
- 演習7-1：5to10
- 演習7-4：40
- 演習7-2：40

### 新しく分かったことをまとめよう

フィールド上の変数は、値を保持し続けられる
 
## 変数の有効範囲
|-              |定義する場所|有効範囲|
|:-------------:|-----------|-------|
|ローカル変数    | メソッドのブロック |定義したブロックの中。メソッドから出ると値は破棄|
|インスタンス変数|クラスの直下|インスタンスが有効な間は保持。アプリを終了するなどメモリから削除されたら破棄|
|クラス変数     | インスタンス変数に |環境が有効な限り有効|

##	変数名の制約やルール
- 変数名の最初の1文字目は、(アルファベット)か(アンダースコア)
- 2文字目以降は、(アルファベット)か(アンダースコア)か(数字)
- (予約語)は使えない(例 intやstringなど)
- (パスカルケース)：HelloWorld
- (キャメルケース)：helloWorld
- (スネークケース)：hello_world
- (ケバブケース)(C#では不可)：hello-world / Hello-World

## 注意！
- 変数名には日本語も使えるが、使うことは一般的ではない。変な癖を付けないように日本語の変数や関数名は使わないようにしよう！
- プログラム関連のファイル名に日本語を使うことはやめよう！

## 演習7-5
以下のプログラムを作成してみよう。

- Timerを置いて、EnabledをTrueにして、timer1をダブルクリック
- エディタが開いた場所に、演習7-4ボタンのLeftプロパティが vx 増えるようにする
- 動作を確認しよう

## 違う型の変数への代入
型が違う変数への代入には、エラーを避けるために明示的に型を変換する手続きが必要な場合がある。これを**型キャスト**という。以下にまとめる。

string型変数str に、int型変数aの値を代入する。

```cs
str = $"{a}";
```

string型変数strに、float型変数fwの値を代入する。

```cs
str = $"{fw}";
```

int型変数aに、float型変数fwの値を代入する。

```cs
a = (int)fw;
```

int型変数aに、string型変数strの値を代入する。

```cs
a = int.Parse(str);
```

float型変数fwに、int型変数aの値を代入する。

```cs
fw = a;
```

float型変数fwに、string型変数strの値を代入する。

```cs
fw = float.Parse(str);
```

---

[前へ](06.md) | [目次へ](README.md#%E7%9B%AE%E6%AC%A1) | [次へ](08.md)
